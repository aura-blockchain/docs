"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[527],{2518(e,n,r){r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"security/incident-response","title":"AURA MVP Incident Response & Upgrade Runbook","description":"Version: 1.1 (MVP)","source":"@site/docs/security/incident-response.md","sourceDirName":"security","slug":"/security/incident-response","permalink":"/security/incident-response","draft":false,"unlisted":false,"editUrl":"https://github.com/aura-blockchain/docs/tree/main/docs/security/incident-response.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"AURA MVP Validator Key Ceremony","permalink":"/security/key-ceremony"},"next":{"title":"AURA Public Endpoints","permalink":"/public-endpoints"}}');var a=r(4848),t=r(8453);const i={},o="AURA MVP Incident Response & Upgrade Runbook",d={},c=[{value:"Server Details",id:"server-details",level:2},{value:"Severity Classification",id:"severity-classification",level:2},{value:"1. Node Down Recovery",id:"1-node-down-recovery",level:2},{value:"2. Missed Blocks Recovery",id:"2-missed-blocks-recovery",level:2},{value:"3. Chain Halt Procedures",id:"3-chain-halt-procedures",level:2},{value:"4. Cosmovisor Upgrade Steps",id:"4-cosmovisor-upgrade-steps",level:2},{value:"5. Manual Binary Upgrade (Emergency)",id:"5-manual-binary-upgrade-emergency",level:2},{value:"6. Database Corruption Recovery",id:"6-database-corruption-recovery",level:2},{value:"7. Key Compromise Response",id:"7-key-compromise-response",level:2},{value:"8. Network Split/Fork Recovery",id:"8-network-splitfork-recovery",level:2},{value:"9. Emergency Contacts",id:"9-emergency-contacts",level:2},{value:"10. MVP 4-Validator Quick Check",id:"10-mvp-4-validator-quick-check",level:2},{value:"11. Monitoring Dashboard Links",id:"11-monitoring-dashboard-links",level:2},{value:"Quick Reference Commands",id:"quick-reference-commands",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"aura-mvp-incident-response--upgrade-runbook",children:"AURA MVP Incident Response & Upgrade Runbook"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Version"}),": 1.1 (MVP)\n",(0,a.jsx)(n.strong,{children:"Last Updated"}),": 2026-01-13"]}),"\n",(0,a.jsx)(n.h2,{id:"server-details",children:"Server Details"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Role"}),(0,a.jsx)(n.th,{children:"IP"}),(0,a.jsx)(n.th,{children:"VPN"}),(0,a.jsx)(n.th,{children:"SSH"}),(0,a.jsx)(n.th,{children:"Validators"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Primary"}),(0,a.jsx)(n.td,{children:"158.69.119.76"}),(0,a.jsx)(n.td,{children:"10.10.0.1"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"ssh aura-testnet"})}),(0,a.jsx)(n.td,{children:"val1, val2"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Secondary"}),(0,a.jsx)(n.td,{children:"139.99.149.160"}),(0,a.jsx)(n.td,{children:"10.10.0.4"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"ssh services-testnet"})}),(0,a.jsx)(n.td,{children:"val3, val4"})]})]})]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Chain ID:"})," ",(0,a.jsx)(n.code,{children:"aura-mvp-1"})," | ",(0,a.jsx)(n.strong,{children:"Binary:"})," ",(0,a.jsx)(n.code,{children:"~/.aura/cosmovisor/genesis/bin/aurad"})," | ",(0,a.jsx)(n.strong,{children:"Home:"})," ",(0,a.jsx)(n.code,{children:"~/.aura-val[N]"})]}),"\n",(0,a.jsx)(n.h2,{id:"severity-classification",children:"Severity Classification"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Severity"}),(0,a.jsx)(n.th,{children:"Response Time"}),(0,a.jsx)(n.th,{children:"Examples"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"P0 Critical"}),(0,a.jsx)(n.td,{children:"Immediate"}),(0,a.jsx)(n.td,{children:"Chain halt, security breach, data corruption"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"P1 High"}),(0,a.jsx)(n.td,{children:"< 15 min"}),(0,a.jsx)(n.td,{children:"Validator down > 30min, endpoints unreachable"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"P2 Medium"}),(0,a.jsx)(n.td,{children:"< 1 hour"}),(0,a.jsx)(n.td,{children:"Performance degradation, config drift"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"P3 Low"}),(0,a.jsx)(n.td,{children:"< 24 hours"}),(0,a.jsx)(n.td,{children:"Documentation, minor issues"})]})]})]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"1-node-down-recovery",children:"1. Node Down Recovery"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Check status\nssh aura-testnet\nsystemctl status aurad || ps aux | grep aurad\n\n# Check logs for errors\ntail -100 ~/.aura/logs/node.log\njournalctl -u aurad -n 100 --no-pager\n\n# Restart node\npkill -f aurad\nnohup ~/.aura/cosmovisor/genesis/bin/aurad start --home ~/.aura > ~/.aura/logs/node.log 2>&1 &\n\n# Verify sync\ncurl -s http://127.0.0.1:10657/status | jq '.result.sync_info'\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"2-missed-blocks-recovery",children:"2. Missed Blocks Recovery"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Check validator status\naurad query staking validator $(aurad keys show validator --bech val -a) --home ~/.aura\n\n# Check signing info\naurad query slashing signing-info $(aurad tendermint show-validator --home ~/.aura) --home ~/.aura\n\n# If jailed, unjail after downtime window\naurad tx slashing unjail --from validator --chain-id aura-mvp-1 --home ~/.aura -y\n\n# Increase priority (reduce missed blocks)\n# Edit ~/.aura/config/config.toml:\n# timeout_commit = "1s"  # Reduce if too slow\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"3-chain-halt-procedures",children:"3. Chain Halt Procedures"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# 1. Confirm halt (check multiple nodes)\ncurl -s http://127.0.0.1:10657/status | jq '.result.sync_info.latest_block_height'\n\n# 2. Check consensus state\ncurl -s http://127.0.0.1:10657/dump_consensus_state | jq '.result.round_state.height_vote_set'\n\n# 3. Coordinate with other validators (Discord/Telegram)\n# 4. If >2/3 validators agree, export state and restart:\naurad export --home ~/.aura > genesis_export.json\n\n# 5. Reset state (CAUTION: coordinate with all validators)\naurad tendermint unsafe-reset-all --home ~/.aura --keep-addr-book\n\n# 6. Replace genesis and restart\ncp genesis_export.json ~/.aura/config/genesis.json\nnohup aurad start --home ~/.aura > ~/.aura/logs/node.log 2>&1 &\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"4-cosmovisor-upgrade-steps",children:"4. Cosmovisor Upgrade Steps"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# 1. Build new binary locally (on bcpc)\ncd ~/blockchain-projects/aura && make build\n\n# 2. Create upgrade directory on server\nssh aura-testnet "mkdir -p ~/.aura/cosmovisor/upgrades/<upgrade-name>/bin"\n\n# 3. Copy binary\nscp build/aurad aura-testnet:~/.aura/cosmovisor/upgrades/<upgrade-name>/bin/\n\n# 4. Verify binary\nssh aura-testnet "~/.aura/cosmovisor/upgrades/<upgrade-name>/bin/aurad version"\n\n# 5. Submit upgrade proposal (if governance required)\naurad tx gov submit-proposal software-upgrade <upgrade-name> \\\n  --title "Upgrade to vX.Y.Z" \\\n  --description "Description" \\\n  --upgrade-height <HEIGHT> \\\n  --from validator \\\n  --chain-id aura-mvp-1 \\\n  --home ~/.aura -y\n\n# Cosmovisor handles the rest automatically at upgrade height\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"5-manual-binary-upgrade-emergency",children:"5. Manual Binary Upgrade (Emergency)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# 1. Stop node\nssh aura-testnet\npkill -f aurad\n\n# 2. Backup current binary\ncp ~/.aura/cosmovisor/genesis/bin/aurad ~/.aura/cosmovisor/genesis/bin/aurad.bak\n\n# 3. Copy new binary (from bcpc)\nscp build/aurad aura-testnet:~/.aura/cosmovisor/genesis/bin/\n\n# 4. Verify and restart\nssh aura-testnet\nchmod +x ~/.aura/cosmovisor/genesis/bin/aurad\n~/.aura/cosmovisor/genesis/bin/aurad version\nnohup ~/.aura/cosmovisor/genesis/bin/aurad start --home ~/.aura > ~/.aura/logs/node.log 2>&1 &\n\n# 5. Monitor logs\ntail -f ~/.aura/logs/node.log\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"6-database-corruption-recovery",children:"6. Database Corruption Recovery"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Option A: Reset and sync from genesis\naurad tendermint unsafe-reset-all --home ~/.aura --keep-addr-book\nnohup aurad start --home ~/.aura > ~/.aura/logs/node.log 2>&1 &\n\n# Option B: Restore from snapshot\npkill -f aurad\nrm -rf ~/.aura/data\n# Download snapshot\ncurl -L https://artifacts.aurablockchain.org/snapshots/latest.tar.gz | tar -xzf - -C ~/.aura/\nnohup aurad start --home ~/.aura > ~/.aura/logs/node.log 2>&1 &\n\n# Option C: State sync from peer\n# Edit ~/.aura/config/config.toml:\n# [statesync]\n# enable = true\n# rpc_servers = "peer1:10657,peer2:10657"\n# trust_height = <RECENT_HEIGHT>\n# trust_hash = "<BLOCK_HASH>"\naurad tendermint unsafe-reset-all --home ~/.aura --keep-addr-book\nnohup aurad start --home ~/.aura > ~/.aura/logs/node.log 2>&1 &\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"7-key-compromise-response",children:"7. Key Compromise Response"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# IMMEDIATE ACTIONS (within minutes):\n# 1. Unbond all tokens\naurad tx staking unbond $(aurad keys show validator --bech val -a) <AMOUNT>uaura \\\n  --from validator --chain-id aura-mvp-1 --home ~/.aura -y\n\n# 2. Stop compromised node\nssh aura-testnet "pkill -f aurad"\n\n# 3. Secure/rotate keys\n# Backup old keys (for investigation)\ncp -r ~/.aura/config/priv_validator_key.json ~/.aura/config/priv_validator_key.json.compromised\ncp -r ~/.aura/keyring-file ~/.aura/keyring-file.compromised\n\n# 4. Generate new validator key\naurad init temp --chain-id aura-mvp-1 --home /tmp/newkeys\ncp /tmp/newkeys/config/priv_validator_key.json ~/.aura/config/\n\n# 5. Create new operator account\naurad keys add validator-new --home ~/.aura\n\n# 6. After unbonding period, redelegate with new keys\n# 7. Investigate breach, update access controls, rotate SSH keys\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"8-network-splitfork-recovery",children:"8. Network Split/Fork Recovery"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# 1. Identify correct chain (check with trusted peers)\ncurl -s http://TRUSTED_PEER:10657/status | jq '.result.sync_info'\n\n# 2. Compare block hashes\naurad query block <HEIGHT> --home ~/.aura | jq '.block_id.hash'\n\n# 3. If on wrong fork, reset and sync\npkill -f aurad\naurad tendermint unsafe-reset-all --home ~/.aura --keep-addr-book\n\n# 4. Ensure correct peers in config.toml\n# persistent_peers = \"node_id@ip:26656,...\"\n\n# 5. Restart and monitor\nnohup aurad start --home ~/.aura > ~/.aura/logs/node.log 2>&1 &\ncurl -s http://127.0.0.1:10657/status | jq '.result.sync_info'\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"9-emergency-contacts",children:"9. Emergency Contacts"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Role"}),(0,a.jsx)(n.th,{children:"Contact"}),(0,a.jsx)(n.th,{children:"Method"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Lead Dev"}),(0,a.jsx)(n.td,{children:"TBD"}),(0,a.jsx)(n.td,{children:"Discord/Telegram"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Validator Ops"}),(0,a.jsx)(n.td,{children:"TBD"}),(0,a.jsx)(n.td,{children:"Phone"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Security"}),(0,a.jsx)(n.td,{children:"TBD"}),(0,a.jsx)(n.td,{children:"Signal"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Hosting Provider"}),(0,a.jsx)(n.td,{children:"OVH"}),(0,a.jsx)(n.td,{children:"support.ovh.com"})]})]})]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Discord:"})," #aura-validators | ",(0,a.jsx)(n.strong,{children:"Telegram:"})," @aura_validators"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"10-mvp-4-validator-quick-check",children:"10. MVP 4-Validator Quick Check"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Check all 4 validators at once\nfor port in 10657 10757; do\n  echo "aura-testnet:$port: $(ssh aura-testnet "curl -s http://127.0.0.1:$port/status 2>/dev/null | jq -r \'.result.sync_info.latest_block_height\'" 2>/dev/null || echo "UNREACHABLE")"\ndone\nfor port in 10857 10957; do\n  echo "services-testnet:$port: $(ssh services-testnet "curl -s http://127.0.0.1:$port/status 2>/dev/null | jq -r \'.result.sync_info.latest_block_height\'" 2>/dev/null || echo "UNREACHABLE")"\ndone\n\n# Check voting power (need 67% = 3 of 4 validators)\nssh aura-testnet "curl -s http://127.0.0.1:10657/validators | jq \'.result.validators | length\'"\n\n# Check consensus participation\nssh aura-testnet "curl -s http://127.0.0.1:10657/consensus_state | jq \'.result.round_state.votes[0].prevotes_bit_array\'"\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"11-monitoring-dashboard-links",children:"11. Monitoring Dashboard Links"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Service"}),(0,a.jsx)(n.th,{children:"URL"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Node Status"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.code,{children:"curl -s http://127.0.0.1:10657/status"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Netdata (bcpc)"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"http://192.168.100.2:19999",children:"http://192.168.100.2:19999"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Block Explorer"}),(0,a.jsxs)(n.td,{children:[(0,a.jsx)(n.a,{href:"http://139.99.149.160:4000",children:"http://139.99.149.160:4000"})," (if running)"]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Prometheus"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"http://158.69.119.76:26660/metrics",children:"http://158.69.119.76:26660/metrics"})})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Grafana"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"https://monitoring.aurablockchain.org",children:"https://monitoring.aurablockchain.org"})})]})]})]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Quick Health Check:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# One-liner status check\nssh aura-testnet 'curl -s http://127.0.0.1:10657/status | jq \"{catching_up: .result.sync_info.catching_up, latest_height: .result.sync_info.latest_block_height, peers: .result.n_peers}\"'\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"quick-reference-commands",children:"Quick Reference Commands"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# View logs\ntail -f ~/.aura/logs/node.log\n\n# Check peers\ncurl -s http://127.0.0.1:10657/net_info | jq '.result.n_peers'\n\n# Get validator address\naurad tendermint show-address --home ~/.aura\n\n# Check disk usage\ndu -sh ~/.aura/data\n\n# Prune old blocks (if disk full)\naurad tendermint unsafe-reset-all --home ~/.aura --keep-addr-book\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}},8453(e,n,r){r.d(n,{R:()=>i,x:()=>o});var s=r(6540);const a={},t=s.createContext(a);function i(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);