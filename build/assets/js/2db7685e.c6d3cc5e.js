"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[544],{2274(n,e,s){s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"operations/troubleshooting","title":"Troubleshooting","description":"Common issues and solutions for AURA node operators.","source":"@site/docs/operations/troubleshooting.md","sourceDirName":"operations","slug":"/operations/troubleshooting","permalink":"/operations/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/aura-blockchain/docs/tree/main/docs/operations/troubleshooting.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"docsSidebar","previous":{"title":"Upgrade Procedures","permalink":"/operations/upgrades"},"next":{"title":"REST API","permalink":"/api/rest"}}');var l=s(4848),r=s(8453);const d={sidebar_position:4},c="Troubleshooting",o={},a=[{value:"Node Issues",id:"node-issues",level:2},{value:"Node Won&#39;t Start",id:"node-wont-start",level:3},{value:"Node Not Syncing",id:"node-not-syncing",level:3},{value:"Out of Memory",id:"out-of-memory",level:3},{value:"Disk Full",id:"disk-full",level:3},{value:"Validator Issues",id:"validator-issues",level:2},{value:"Validator Jailed",id:"validator-jailed",level:3},{value:"Missing Blocks",id:"missing-blocks",level:3},{value:"Double Signing",id:"double-signing",level:3},{value:"Transaction Issues",id:"transaction-issues",level:2},{value:"Transaction Not Included",id:"transaction-not-included",level:3},{value:"Sequence Mismatch",id:"sequence-mismatch",level:3},{value:"Network Issues",id:"network-issues",level:2},{value:"Can&#39;t Connect to Peers",id:"cant-connect-to-peers",level:3},{value:"Connection Refused to RPC",id:"connection-refused-to-rpc",level:3},{value:"Database Issues",id:"database-issues",level:2},{value:"Corrupted Database",id:"corrupted-database",level:3},{value:"WAL Errors",id:"wal-errors",level:3},{value:"Getting Help",id:"getting-help",level:2}];function t(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"troubleshooting",children:"Troubleshooting"})}),"\n",(0,l.jsx)(e.p,{children:"Common issues and solutions for AURA node operators."}),"\n",(0,l.jsx)(e.h2,{id:"node-issues",children:"Node Issues"}),"\n",(0,l.jsx)(e.h3,{id:"node-wont-start",children:"Node Won't Start"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": ",(0,l.jsx)(e.code,{children:"aurad start"})," exits immediately"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check logs:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"journalctl -u aurad -n 100 --no-pager\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Validate genesis:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad genesis validate\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check port conflicts:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'netstat -tlnp | grep -E "26656|26657|1317|9090"\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Verify permissions:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"ls -la ~/.aurad/\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"node-not-syncing",children:"Node Not Syncing"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": Block height not increasing"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check peer connections:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"curl localhost:26657/net_info | jq '.result.n_peers'\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["Add more peers to ",(0,l.jsx)(e.code,{children:"config.toml"})]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check firewall:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"sudo ufw status\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Try state sync for faster catch-up"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"out-of-memory",children:"Out of Memory"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": Node killed by OOM killer"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Add swap:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"sudo fallocate -l 4G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Increase pruning:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-toml",children:'# In app.toml\npruning = "everything"\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Reduce mempool size:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-toml",children:"# In config.toml\n[mempool]\nsize = 1000\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"disk-full",children:"Disk Full"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": Write errors in logs"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check disk usage:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"df -h\ndu -sh ~/.aurad/*\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Enable pruning"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Compact database:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad tendermint compact-db\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"validator-issues",children:"Validator Issues"}),"\n",(0,l.jsx)(e.h3,{id:"validator-jailed",children:"Validator Jailed"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": Validator not in active set, status shows jailed"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Cause"}),": Missed too many blocks or double-signed"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check signing info:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad query slashing signing-info $(aurad tendermint show-validator)\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Wait for jail period to expire"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Unjail:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad tx slashing unjail --from validator-key --chain-id aura-mvp-1\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"missing-blocks",children:"Missing Blocks"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": Validator missing pre-commits"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check system time:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"timedatectl status\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Sync time:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"sudo timedatectl set-ntp true\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check network latency to peers"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Ensure adequate resources"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"double-signing",children:"Double Signing"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Warning"}),": Double signing results in permanent slashing"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Prevention"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"Never run two validators with the same key"}),"\n",(0,l.jsx)(e.li,{children:"Use a sentry node architecture"}),"\n",(0,l.jsxs)(e.li,{children:["Backup ",(0,l.jsx)(e.code,{children:"priv_validator_state.json"})," carefully"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"transaction-issues",children:"Transaction Issues"}),"\n",(0,l.jsx)(e.h3,{id:"transaction-not-included",children:"Transaction Not Included"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": Transaction pending but not confirmed"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check gas:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad tx bank send ... --gas auto --gas-adjustment 1.5\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Increase fees:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"--gas-prices 0.05uaura\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check account sequence:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad query account <address>\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"sequence-mismatch",children:"Sequence Mismatch"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),': "account sequence mismatch" error']}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,l.jsx)(e.p,{children:"Wait for pending transactions to confirm, or specify sequence:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"--sequence <correct_sequence>\n"})}),"\n",(0,l.jsx)(e.h2,{id:"network-issues",children:"Network Issues"}),"\n",(0,l.jsx)(e.h3,{id:"cant-connect-to-peers",children:"Can't Connect to Peers"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check firewall allows P2P port (26656)"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Verify persistent_peers format:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"node_id@ip:port\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Try seeds instead of persistent_peers"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"connection-refused-to-rpc",children:"Connection Refused to RPC"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": ",(0,l.jsx)(e.code,{children:"curl: (7) Failed to connect"})]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check RPC is bound correctly:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-toml",children:'[rpc]\nladdr = "tcp://0.0.0.0:26657"\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Check firewall"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Verify node is running"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"database-issues",children:"Database Issues"}),"\n",(0,l.jsx)(e.h3,{id:"corrupted-database",children:"Corrupted Database"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": Panic on startup, database errors"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solutions"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Try unsafe reset:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad tendermint unsafe-reset-all\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Restore from backup"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"Use state sync to resync"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"wal-errors",children:"WAL Errors"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Symptom"}),": WAL-related errors in logs"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Solution"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"aurad tendermint unsafe-reset-all --keep-addr-book\n"})}),"\n",(0,l.jsx)(e.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,l.jsx)(e.p,{children:"If you can't resolve an issue:"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["Check ",(0,l.jsx)(e.a,{href:"https://github.com/aura-blockchain/aura/issues",children:"GitHub Issues"})]}),"\n",(0,l.jsx)(e.li,{children:"Search existing discussions"}),"\n",(0,l.jsxs)(e.li,{children:["Open a new issue with:","\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["Node version (",(0,l.jsx)(e.code,{children:"aurad version"}),")"]}),"\n",(0,l.jsx)(e.li,{children:"Full error logs"}),"\n",(0,l.jsx)(e.li,{children:"Steps to reproduce"}),"\n",(0,l.jsx)(e.li,{children:"System specs"}),"\n"]}),"\n"]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}},8453(n,e,s){s.d(e,{R:()=>d,x:()=>c});var i=s(6540);const l={},r=i.createContext(l);function d(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),i.createElement(r.Provider,{value:e},n.children)}}}]);