"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[21],{8453(e,n,s){s.d(n,{R:()=>a,x:()=>d});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}},9845(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"operations/node-operator","title":"Node Operator Guide","description":"This guide covers running and maintaining an AURA full node.","source":"@site/docs/operations/node-operator.md","sourceDirName":"operations","slug":"/operations/node-operator","permalink":"/operations/node-operator","draft":false,"unlisted":false,"editUrl":"https://github.com/aura-blockchain/docs/tree/main/docs/operations/node-operator.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Validator Setup Guide","permalink":"/operations/validator-setup"},"next":{"title":"Upgrade Procedures","permalink":"/operations/upgrades"}}');var r=s(4848),t=s(8453);const a={sidebar_position:2},d="Node Operator Guide",l={},o=[{value:"Node Types",id:"node-types",level:2},{value:"Installation",id:"installation",level:2},{value:"From Binary",id:"from-binary",level:3},{value:"From Source",id:"from-source",level:3},{value:"Configuration",id:"configuration",level:2},{value:"Initialize Node",id:"initialize-node",level:3},{value:"Key Configuration Files",id:"key-configuration-files",level:3},{value:"Important Settings",id:"important-settings",level:3},{value:"State Sync",id:"state-sync",level:2},{value:"Maintenance",id:"maintenance",level:2},{value:"Check Node Status",id:"check-node-status",level:3},{value:"View Logs",id:"view-logs",level:3},{value:"Restart Node",id:"restart-node",level:3},{value:"Export State",id:"export-state",level:3},{value:"Reset Node",id:"reset-node",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Node Won&#39;t Start",id:"node-wont-start",level:3},{value:"Node Not Syncing",id:"node-not-syncing",level:3},{value:"Out of Memory",id:"out-of-memory",level:3},{value:"Backup",id:"backup",level:2},{value:"What to Backup",id:"what-to-backup",level:3},{value:"Backup Command",id:"backup-command",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"node-operator-guide",children:"Node Operator Guide"})}),"\n",(0,r.jsx)(n.p,{children:"This guide covers running and maintaining an AURA full node."}),"\n",(0,r.jsx)(n.h2,{id:"node-types",children:"Node Types"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Purpose"}),(0,r.jsx)(n.th,{children:"Requirements"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Full Node"}),(0,r.jsx)(n.td,{children:"Sync and verify all blocks"}),(0,r.jsx)(n.td,{children:"Standard"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Archive Node"}),(0,r.jsx)(n.td,{children:"Keep all historical state"}),(0,r.jsx)(n.td,{children:"High storage"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Validator"}),(0,r.jsx)(n.td,{children:"Participate in consensus"}),(0,r.jsx)(n.td,{children:"High availability"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Seed Node"}),(0,r.jsx)(n.td,{children:"Help peers discover network"}),(0,r.jsx)(n.td,{children:"Good connectivity"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsx)(n.h3,{id:"from-binary",children:"From Binary"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Download binary\ncurl -LO https://artifacts.aurablockchain.org/v1.0.0-mvp/aurad-linux-amd64\nchmod +x aurad-linux-amd64\nmv aurad-linux-amd64 /usr/local/bin/aurad\n"})}),"\n",(0,r.jsx)(n.h3,{id:"from-source",children:"From Source"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/aura-blockchain/aura.git\ncd aura\nmake build-mvp\ncp build/aurad /usr/local/bin/\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"initialize-node",children:"Initialize Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"aurad init my-node --chain-id aura-mvp-1\n"})}),"\n",(0,r.jsx)(n.h3,{id:"key-configuration-files",children:"Key Configuration Files"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"File"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~/.aurad/config/config.toml"})}),(0,r.jsx)(n.td,{children:"CometBFT configuration"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~/.aurad/config/app.toml"})}),(0,r.jsx)(n.td,{children:"Application configuration"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~/.aurad/config/genesis.json"})}),(0,r.jsx)(n.td,{children:"Network genesis file"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"~/.aurad/data/"})}),(0,r.jsx)(n.td,{children:"Blockchain data"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"important-settings",children:"Important Settings"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"config.toml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'# P2P settings - connect to sentry nodes\n[p2p]\npersistent_peers = "f5ce5e5ce5dd77bdbfd636fb8148756f6df9c531@158.69.119.76:26681,35fdadb8b017fc95023a384c7769b946f363294e@139.99.149.160:26681"\nseeds = ""\nmax_num_inbound_peers = 40\nmax_num_outbound_peers = 10\n\n# RPC settings\n[rpc]\nladdr = "tcp://127.0.0.1:26657"\n\n# Mempool\n[mempool]\nsize = 5000\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"app.toml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'# Pruning\npruning = "default"\n\n# API settings\n[api]\nenable = true\naddress = "tcp://127.0.0.1:1317"\n\n# gRPC settings\n[grpc]\nenable = true\naddress = "0.0.0.0:9090"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"state-sync",children:"State Sync"}),"\n",(0,r.jsx)(n.p,{children:"For faster sync, use state sync:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'# In config.toml\n[statesync]\nenable = true\nrpc_servers = "https://testnet-rpc.aurablockchain.org:443,https://testnet-rpc.aurablockchain.org:443"\ntrust_height = <recent_height>\ntrust_hash = "<block_hash>"\ntrust_period = "168h"\n'})}),"\n",(0,r.jsx)(n.p,{children:"Get trust height and hash:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'LATEST=$(curl -s https://testnet-rpc.aurablockchain.org/block | jq -r .result.block.header.height)\nTRUST_HEIGHT=$((LATEST - 1000))\nTRUST_HASH=$(curl -s "https://testnet-rpc.aurablockchain.org/block?height=$TRUST_HEIGHT" | jq -r .result.block_id.hash)\necho "trust_height = $TRUST_HEIGHT"\necho "trust_hash = \\"$TRUST_HASH\\""\n'})}),"\n",(0,r.jsx)(n.h2,{id:"maintenance",children:"Maintenance"}),"\n",(0,r.jsx)(n.h3,{id:"check-node-status",children:"Check Node Status"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"aurad status\n"})}),"\n",(0,r.jsx)(n.h3,{id:"view-logs",children:"View Logs"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"journalctl -u aurad -f\n"})}),"\n",(0,r.jsx)(n.h3,{id:"restart-node",children:"Restart Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo systemctl restart aurad\n"})}),"\n",(0,r.jsx)(n.h3,{id:"export-state",children:"Export State"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"aurad export --height <height> > genesis-export.json\n"})}),"\n",(0,r.jsx)(n.h3,{id:"reset-node",children:"Reset Node"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"aurad tendermint unsafe-reset-all\n"})}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.h3,{id:"node-wont-start",children:"Node Won't Start"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check logs: ",(0,r.jsx)(n.code,{children:"journalctl -u aurad -n 100"})]}),"\n",(0,r.jsxs)(n.li,{children:["Verify genesis: ",(0,r.jsx)(n.code,{children:"aurad genesis validate"})]}),"\n",(0,r.jsxs)(n.li,{children:["Check disk space: ",(0,r.jsx)(n.code,{children:"df -h"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"node-not-syncing",children:"Node Not Syncing"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Check peers: ",(0,r.jsx)(n.code,{children:"curl localhost:26657/net_info"})]}),"\n",(0,r.jsxs)(n.li,{children:["Verify connectivity: ",(0,r.jsx)(n.code,{children:"curl localhost:26657/status"})]}),"\n",(0,r.jsx)(n.li,{children:"Try adding more peers"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"out-of-memory",children:"Out of Memory"}),"\n",(0,r.jsx)(n.p,{children:"Increase pruning or add swap:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo fallocate -l 4G /swapfile\nsudo chmod 600 /swapfile\nsudo mkswap /swapfile\nsudo swapon /swapfile\n"})}),"\n",(0,r.jsx)(n.h2,{id:"backup",children:"Backup"}),"\n",(0,r.jsx)(n.h3,{id:"what-to-backup",children:"What to Backup"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"~/.aurad/config/priv_validator_key.json"})," - ",(0,r.jsx)(n.strong,{children:"Critical"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"~/.aurad/config/node_key.json"})," - Node identity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"~/.aurad/data/priv_validator_state.json"})," - Validator state"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"backup-command",children:"Backup Command"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"tar -czvf aura-backup-$(date +%Y%m%d).tar.gz \\\n  ~/.aurad/config/priv_validator_key.json \\\n  ~/.aurad/config/node_key.json\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);