"use strict";(globalThis.webpackChunktemp_docusaurus=globalThis.webpackChunktemp_docusaurus||[]).push([[761],{5871(e,r,n){n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>d,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"operations/upgrades","title":"Upgrade Procedures","description":"This guide covers upgrading AURA nodes between versions.","source":"@site/docs/operations/upgrades.md","sourceDirName":"operations","slug":"/operations/upgrades","permalink":"/operations/upgrades","draft":false,"unlisted":false,"editUrl":"https://github.com/aura-blockchain/docs/tree/main/docs/operations/upgrades.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"docsSidebar","previous":{"title":"Node Operator Guide","permalink":"/operations/node-operator"},"next":{"title":"Troubleshooting","permalink":"/operations/troubleshooting"}}');var s=n(4848),i=n(8453);const d={sidebar_position:3},t="Upgrade Procedures",l={},o=[{value:"Upgrade Types",id:"upgrade-types",level:2},{value:"Using Cosmovisor",id:"using-cosmovisor",level:2},{value:"Install Cosmovisor",id:"install-cosmovisor",level:3},{value:"Directory Structure",id:"directory-structure",level:3},{value:"Configure Systemd",id:"configure-systemd",level:3},{value:"Manual Upgrade",id:"manual-upgrade",level:2},{value:"1. Stop the Node",id:"1-stop-the-node",level:3},{value:"2. Backup",id:"2-backup",level:3},{value:"3. Replace Binary",id:"3-replace-binary",level:3},{value:"4. Migrate (if required)",id:"4-migrate-if-required",level:3},{value:"5. Restart",id:"5-restart",level:3},{value:"6. Verify",id:"6-verify",level:3},{value:"Governance Upgrades",id:"governance-upgrades",level:2},{value:"1. Submit Upgrade Proposal",id:"1-submit-upgrade-proposal",level:3},{value:"2. Vote",id:"2-vote",level:3},{value:"3. Prepare Binary",id:"3-prepare-binary",level:3},{value:"4. Chain Halts at Upgrade Height",id:"4-chain-halts-at-upgrade-height",level:3},{value:"Rollback",id:"rollback",level:2},{value:"1. Stop Node",id:"1-stop-node",level:3},{value:"2. Restore Backup",id:"2-restore-backup",level:3},{value:"3. Restore Old Binary",id:"3-restore-old-binary",level:3},{value:"4. Restart",id:"4-restart",level:3},{value:"Version History",id:"version-history",level:2},{value:"Emergency Procedures",id:"emergency-procedures",level:2}];function c(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"upgrade-procedures",children:"Upgrade Procedures"})}),"\n",(0,s.jsx)(r.p,{children:"This guide covers upgrading AURA nodes between versions."}),"\n",(0,s.jsx)(r.h2,{id:"upgrade-types",children:"Upgrade Types"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"}),(0,s.jsx)(r.th,{children:"Downtime"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Soft Upgrade"}),(0,s.jsx)(r.td,{children:"Binary replacement, no state migration"}),(0,s.jsx)(r.td,{children:"Minutes"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Hard Upgrade"}),(0,s.jsx)(r.td,{children:"State migration required"}),(0,s.jsx)(r.td,{children:"Hours"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Emergency"}),(0,s.jsx)(r.td,{children:"Security patch"}),(0,s.jsx)(r.td,{children:"Varies"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"using-cosmovisor",children:"Using Cosmovisor"}),"\n",(0,s.jsx)(r.p,{children:"Cosmovisor automates binary upgrades via governance proposals."}),"\n",(0,s.jsx)(r.h3,{id:"install-cosmovisor",children:"Install Cosmovisor"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"go install cosmossdk.io/tools/cosmovisor/cmd/cosmovisor@latest\n"})}),"\n",(0,s.jsx)(r.h3,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"~/.aurad/\n\u251c\u2500\u2500 cosmovisor/\n\u2502   \u251c\u2500\u2500 genesis/\n\u2502   \u2502   \u2514\u2500\u2500 bin/\n\u2502   \u2502       \u2514\u2500\u2500 aurad\n\u2502   \u2514\u2500\u2500 upgrades/\n\u2502       \u2514\u2500\u2500 v2.0.0/\n\u2502           \u2514\u2500\u2500 bin/\n\u2502               \u2514\u2500\u2500 aurad\n"})}),"\n",(0,s.jsx)(r.h3,{id:"configure-systemd",children:"Configure Systemd"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-ini",children:'[Unit]\nDescription=AURA Validator (Cosmovisor)\nAfter=network-online.target\n\n[Service]\nUser=ubuntu\nEnvironment="DAEMON_NAME=aurad"\nEnvironment="DAEMON_HOME=/home/ubuntu/.aurad"\nEnvironment="DAEMON_ALLOW_DOWNLOAD_BINARIES=false"\nEnvironment="DAEMON_RESTART_AFTER_UPGRADE=true"\nExecStart=/home/ubuntu/go/bin/cosmovisor run start\nRestart=always\n\n[Install]\nWantedBy=multi-user.target\n'})}),"\n",(0,s.jsx)(r.h2,{id:"manual-upgrade",children:"Manual Upgrade"}),"\n",(0,s.jsx)(r.h3,{id:"1-stop-the-node",children:"1. Stop the Node"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"sudo systemctl stop aurad\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-backup",children:"2. Backup"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"cp -r ~/.aurad ~/.aurad-backup-$(date +%Y%m%d)\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-replace-binary",children:"3. Replace Binary"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Download new binary\ncurl -LO https://artifacts.aurablockchain.org/v2.0.0/aurad-linux-amd64\n\n# Verify checksum\nsha256sum aurad-linux-amd64\n\n# Install\nchmod +x aurad-linux-amd64\nsudo mv aurad-linux-amd64 /usr/local/bin/aurad\n\n# Verify version\naurad version\n"})}),"\n",(0,s.jsx)(r.h3,{id:"4-migrate-if-required",children:"4. Migrate (if required)"}),"\n",(0,s.jsx)(r.p,{children:"Some upgrades require state migration:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"aurad migrate ~/.aurad/data/priv_validator_state.json\n"})}),"\n",(0,s.jsx)(r.h3,{id:"5-restart",children:"5. Restart"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"sudo systemctl start aurad\n"})}),"\n",(0,s.jsx)(r.h3,{id:"6-verify",children:"6. Verify"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"aurad status\njournalctl -u aurad -f\n"})}),"\n",(0,s.jsx)(r.h2,{id:"governance-upgrades",children:"Governance Upgrades"}),"\n",(0,s.jsx)(r.p,{children:"For coordinated network upgrades:"}),"\n",(0,s.jsx)(r.h3,{id:"1-submit-upgrade-proposal",children:"1. Submit Upgrade Proposal"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:'aurad tx gov submit-proposal software-upgrade v2.0.0 \\\n  --title "Upgrade to v2.0.0" \\\n  --description "This upgrade adds..." \\\n  --upgrade-height 100000 \\\n  --deposit 10000000uaura \\\n  --from validator-key\n'})}),"\n",(0,s.jsx)(r.h3,{id:"2-vote",children:"2. Vote"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"aurad tx gov vote <proposal-id> yes --from validator-key\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-prepare-binary",children:"3. Prepare Binary"}),"\n",(0,s.jsx)(r.p,{children:"Before the upgrade height, place the new binary:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"mkdir -p ~/.aurad/cosmovisor/upgrades/v2.0.0/bin\ncp aurad-v2.0.0 ~/.aurad/cosmovisor/upgrades/v2.0.0/bin/aurad\n"})}),"\n",(0,s.jsx)(r.h3,{id:"4-chain-halts-at-upgrade-height",children:"4. Chain Halts at Upgrade Height"}),"\n",(0,s.jsx)(r.p,{children:"The chain will automatically halt. Cosmovisor will switch binaries and restart."}),"\n",(0,s.jsx)(r.h2,{id:"rollback",children:"Rollback"}),"\n",(0,s.jsx)(r.p,{children:"If an upgrade fails:"}),"\n",(0,s.jsx)(r.h3,{id:"1-stop-node",children:"1. Stop Node"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"sudo systemctl stop aurad\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-restore-backup",children:"2. Restore Backup"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"rm -rf ~/.aurad\nmv ~/.aurad-backup-YYYYMMDD ~/.aurad\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-restore-old-binary",children:"3. Restore Old Binary"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"sudo mv /usr/local/bin/aurad-old /usr/local/bin/aurad\n"})}),"\n",(0,s.jsx)(r.h3,{id:"4-restart",children:"4. Restart"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"sudo systemctl start aurad\n"})}),"\n",(0,s.jsx)(r.h2,{id:"version-history",children:"Version History"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Version"}),(0,s.jsx)(r.th,{children:"Date"}),(0,s.jsx)(r.th,{children:"Notes"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"v1.0.0-mvp"}),(0,s.jsx)(r.td,{children:"2026-01-13"}),(0,s.jsx)(r.td,{children:"Initial MVP release"})]})})]}),"\n",(0,s.jsx)(r.h2,{id:"emergency-procedures",children:"Emergency Procedures"}),"\n",(0,s.jsx)(r.p,{children:"For security vulnerabilities:"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Monitor announcements"})," - Watch GitHub and Discord"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Prepare quickly"})," - Download and verify patches immediately"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Coordinate"})," - Follow network coordinator instructions"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Communicate"})," - Report issues to the team"]}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453(e,r,n){n.d(r,{R:()=>d,x:()=>t});var a=n(6540);const s={},i=a.createContext(s);function d(e){const r=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),a.createElement(i.Provider,{value:r},e.children)}}}]);